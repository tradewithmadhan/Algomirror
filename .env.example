# AlgoMirror Environment Configuration
# Copy this file to .env and update with your values

# Flask Configuration
FLASK_APP=app.py
FLASK_ENV=development
SECRET_KEY=your-secret-key-change-this-in-production

# Database Configuration
# For SQLite (development) - file will be created in instance/ directory
DATABASE_URL=sqlite:///instance/algomirror.db

# For PostgreSQL (production)
# DATABASE_URL=postgresql://username:password@localhost:5432/algomirror_prod

# Redis Configuration (optional - uses memory if not provided)
# For development, you can leave this commented or use memory://
# REDIS_URL=memory://

# For production with Redis (recommended)
# REDIS_URL=redis://localhost:6379/0

# Encryption Configuration  
# REQUIRED: Generate a Fernet key using: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
ENCRYPTION_KEY=your-fernet-encryption-key-change-this

# Logging Configuration
LOG_LEVEL=INFO

# Session Configuration
# For development
SESSION_TYPE=filesystem

# For production (requires Redis)
# SESSION_TYPE=redis

# CORS Configuration
# Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:8000

# Additional production CORS origins
# CORS_ORIGINS=http://localhost:8000,https://yourdomain.com,https://www.yourdomain.com

# Content Security Policy (CSP) Configuration
# Set to TRUE to enable CSP, FALSE to disable
CSP_ENABLED=FALSE

# Set to TRUE to use Content-Security-Policy-Report-Only mode (testing without blocking)
# This will report violations but not block content - useful for testing
CSP_REPORT_ONLY=FALSE

# Default source directive - restricts all resource types by default
CSP_DEFAULT_SRC='self'

# Script source directive - controls where scripts can be loaded from
# Includes Socket.IO CDN which is required by the application
# 'unsafe-inline' is needed for inline scripts
# Cloudflare Insights is used for analytics
CSP_SCRIPT_SRC='self' 'unsafe-inline' https://cdn.socket.io https://static.cloudflareinsights.com

# Style source directive - controls where styles can be loaded from
# 'unsafe-inline' is needed for some inline styles in the application
CSP_STYLE_SRC='self' 'unsafe-inline'

# Image source directive - controls where images can be loaded from
# 'data:' allows base64 encoded images
CSP_IMG_SRC='self' data:

# Connect source directive - controls what network connections are allowed
# Includes WebSocket connections needed for real-time updates
CSP_CONNECT_SRC='self' wss: ws:

# Font source directive - controls where fonts can be loaded from
CSP_FONT_SRC='self'

# Object source directive - controls where plugins can be loaded from
# 'none' disables all object, embed, and applet elements
CSP_OBJECT_SRC='none'

# Media source directive - controls where audio and video can be loaded from
CSP_MEDIA_SRC='self' data:

# Frame source directive - controls where iframes can be loaded from
# If you integrate with TradingView or other platforms, add their domains
CSP_FRAME_SRC='self'

# Form action directive - restricts where forms can be submitted to
CSP_FORM_ACTION='self'

# Frame ancestors directive - controls which sites can embed your site in frames
# This helps prevent clickjacking attacks
CSP_FRAME_ANCESTORS='self'

# Base URI directive - restricts what base URIs can be used
CSP_BASE_URI='self'

# Set to TRUE to upgrade insecure (HTTP) requests to HTTPS
# Recommended for production environments
CSP_UPGRADE_INSECURE_REQUESTS=FALSE

# URI to report CSP violations to (optional)
# Example: /csp-report
CSP_REPORT_URI=

# Rate Limiting Configuration
# Note: Rate limiting uses REDIS_URL setting automatically
# No separate RATELIMIT_STORAGE_URL needed in current implementation

# OpenAlgo Default Configuration (used by forms)
# These are defaults - users can override when adding accounts
DEFAULT_OPENALGO_HOST=http://127.0.0.1:5000
DEFAULT_OPENALGO_WS=ws://127.0.0.1:8765

# Ping Monitoring Configuration
# Interval in seconds to check connection status of all accounts
PING_MONITORING_INTERVAL=30

# Enable/disable automatic ping monitoring
PING_MONITORING_ENABLED=true

# Maximum consecutive ping failures before marking account as disconnected
PING_MAX_FAILURES=3

# Quiet mode reduces log noise (recommended for development when OpenAlgo servers aren't running)
PING_QUIET_MODE=true

# Production Security Settings (only set these for production)
# WTF_CSRF_SSL_STRICT=True
# SESSION_COOKIE_SECURE=True

# Development vs Production Example:
# 
# DEVELOPMENT (.env):
# FLASK_ENV=development
# DATABASE_URL=sqlite:///instance/algomirror.db
# LOG_LEVEL=DEBUG
# SESSION_TYPE=filesystem
# 
# PRODUCTION (.env):
# FLASK_ENV=production  
# SECRET_KEY=your-super-secure-random-256-bit-key
# DATABASE_URL=postgresql://username:password@localhost:5432/algomirror_prod
# REDIS_URL=redis://localhost:6379/0
# SESSION_TYPE=redis
# ENCRYPTION_KEY=your-fernet-encryption-key
# LOG_LEVEL=WARNING
# CORS_ORIGINS=https://yourdomain.com